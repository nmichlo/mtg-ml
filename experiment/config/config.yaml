defaults:
  - _self_
  - data: mtg64
  - framework: sivae
  - run_location: docker # _horovod

settings:
  job:
    seed: 777
  data:
    batch_size: 16

trainer:
  _target_: pytorch_lightning.Trainer

  # gpu to use
  gpus: 1

  # training steps
  max_steps: 1000000
  max_epochs: 1000000

  # training options
  gradient_clip_val: 2.0  # I am not sure what a good value for this is!

  callbacks:
    - _target_: mtg_ml.util.ptl.VisualiseCallback
      name: 'vis'
      input_batch: 64
      every_n_steps: 1000
      log_local: FALSE
      log_wandb: FALSE
      save_dir: .
      mean_std:
        - ${data.meta.img_mean}
        - ${data.meta.img_std}
      figwidth: 15
    - _target_: pytorch_lightning.callbacks.ModelCheckpoint
      dirpath: .
      monitor: NULL
      every_n_train_steps: 3000
      verbose: True
      save_top_k: -1
